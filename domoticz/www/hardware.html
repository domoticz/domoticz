<div id="hardwarecontent">
</div>
<div id="hardwaremode" style="display:none;">
<center>
<form id="settings">
	<table>
		<tr>
			<td align="left" style="width:150px"><input type="checkbox" id="undecon" name="undecon">&nbsp;<label for="undecon">undec on</label></td>
			<td align="left" style="width:150px"><input type="checkbox" id="BlindT1T2T3T4" name="BlindT1T2T3T4">&nbsp;<label for="BlindT1T2T3T4">Blind T1/T2/T3/T4</label></td>
			<td align="left" style="width:150px"><input type="checkbox" id="Visonic" nane="Visonic">&nbsp;<label for="Visonic">Visonic</label></td>
		</tr>
		<tr>
			<td><input type="checkbox" id="rfu6" name="rfu6">&nbsp;<label for="rfu6">RFU 6</label></td>
			<td><input type="checkbox" id="BlindT0" name="BlindT0">&nbsp;<label for="BlindT0">Blind T0</label></td>
			<td><input type="checkbox" id="ATIremote" name="ATIremote">&nbsp;<label for="ATIremote">ATI remote</label></td>
		</tr>
		<tr>
			<td><input type="checkbox" id="rfu5" name="rfu5">&nbsp;<label for="rfu5">RFU 5</label></td>
			<td><input type="checkbox" id="ProGuard" name="ProGuard">&nbsp;<label for="ProGuard">ProGuard</label></td>
			<td><input type="checkbox" id="OregonScientific" name="OregonScientific">&nbsp;<label for="OregonScientific">Oregon Scientific</label></td>
		</tr>
		<tr>
			<td><input type="checkbox" id="rfu4">&nbsp;<label for="rfu4">RFU 4</label></td>
			<td><input type="checkbox" id="FS20">&nbsp;<label for="FS20">FS20</label></td>
			<td><input type="checkbox" id="Meiantech">&nbsp;<label for="Meiantech">Meiantech</label></td>
		</tr>
		<tr>
			<td><input type="checkbox" id="Lighting4" name="Lighting4">&nbsp;<label for="Lighting4">Lighting4</label></td>
			<td><input type="checkbox" id="LaCrosse" name="LaCrosse">&nbsp;<label for="LaCrosse">LaCrosse</label></td>
			<td><input type="checkbox" id="HomeEasyEU" name="HomeEasyEU">&nbsp;<label for="HomeEasyEU">HomeEasy EU</label></td>
		</tr>
		<tr>
			<td><input type="checkbox" id="FineOffsetViking" name="FineOffsetViking">&nbsp;<label for="FineOffsetViking">FineOffset/Viking</label></td>
			<td><input type="checkbox" id="HidekiUPM" name="HidekiUPM">&nbsp;<label for="HidekiUPM">Hideki/UPM</label></td>
			<td><input type="checkbox" id="AC" name="AC">&nbsp;<label for="AC">AC</label></td>
		</tr>
		<tr>
			<td><input type="checkbox" id="Rubicson" name="Rubicson">&nbsp;<label for="Rubicson">Rubicson</label></td>
			<td><input type="checkbox" id="ADLightwaveRF" name="ADLightwaveRF">&nbsp;<label for="ADLightwaveRF">AD/LightwaveRF</label></td>
			<td><input type="checkbox" id="ARC" name="ARC">&nbsp;<label for="ARC">ARC</label></td>
		</tr>
		<tr>
			<td><input type="checkbox" id="AEBlyss" name="AEBlyss">&nbsp;<label for="AEBlyss">AE/Blyss</label></td>
			<td><input type="checkbox" id="Mertik" name="Mertik">&nbsp;<label for="Mertik">Mertik</label></td>
			<td><input type="checkbox" id="X10" name="X10">&nbsp;<label for="X10">X10</label></td>
		</tr>
	</table>
	<br>
	<input type="hidden" id="idx" name="idx" value="-1">
	<button class="btn btn-warning" id="defaultbutton">Default</button>
	<button class="btn btn-danger" id="submitbutton">Set Mode</button>
</form>
</center>
</div>
<div id="rego6xxtypeedit" style="display:none;">
<center>
<form id="regotype">
    <table>
        <tr>
            <td><label>Rego 6XX type: </label></td>
            <td><select id="comborego6xxtype" name="Rego6XXType" style="width:200px" class="combobox ui-corner-all">
                <option value="0">600-635, 637 single language</option>
                <option value="1">636</option>
                <option value="2">637 multi language</option>
            </select></td>
        </tr>
        <tr><td colspan="2">Note: Any change will take effect after restarting Domoticz!</td></tr>
    </table>
	<br>
	<input type="hidden" id="idx" name="idx" value="-1">
	<button class="btn btn-danger" id="submitbuttonrego">Set Mode</button>
</form>
</center>
</div>
<div id="hardwaremain" style="display:none;">
    <table class="display" id="hardwaretable" border="0" cellpadding="0" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th width="120" align="left">Name</th>
                <th width="60" align="left">Enabled</th>
                <th width="240" align="left">Type</th>
                <th width="200" align="left">Address</th>
                <th width="80" align="center">Port</th>
            </tr>
        </thead>
    </table>
    <table id="updelclr" border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td>
					<a class="btnstyle3-dis" id="hardwareupdate" >Update</a>&nbsp;&nbsp;&nbsp;
					<a class="btnstyle3-dis" id="hardwaredelete" >Delete</a>
				</td>
			</tr>
		</table>
		<br>
		<table class="display" id="hardwareparamstable" border="0" cellpadding="0" cellspacing="20">
			<tr>
				<td align="right" style="width:80px"><label for="enabled">Enabled:</label></td>
				<td><input type="checkbox" id="enabled" checked></td>
			</tr>
			<tr>
				<td align="right" style="width:110px"><label for="name">Name:</label></td>
				<td><input type="text" id="hardwarename" style="width: 250px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			<tr>
				<td align="right" style="width:110px"><label for="name">Type:</label></td>
				<td><select id="combotype" style="width:410px" class="combobox ui-corner-all">
						<!--#embed hardwaretypes -->
						</select>
				</td>
			</tr>
		</table>
		<div id="divserial">
			<br>
			<table class="display" id="hardwareparamsserial" border="0" cellpadding="0" cellspacing="20">
				<tr>
					<td align="right" style="width:110px"><label id="lblserialport" for="name">Serial Port:</label></td>
					<td><select id="comboserialport" style="width:210px" class="combobox ui-corner-all">
							<!--#embed serialdevices -->
							</select>
					</td>
				</tr>
			</table>
		</div>
		<div id="divremote">
			<br>
			<table class="display" id="hardwareparamsremote" border="0" cellpadding="0" cellspacing="20">
				<tr>
					<td align="right" style="width:110px"><label id="lblremoteaddress" for="name">Remote Address:</label></td>
					<td><input type="text" id="tcpaddress" style="width: 250px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
				</tr>
				<tr>
					<td align="right" style="width:110px"><label id="lblremoteport" for="name">port:</label></td>
					<td><input type="text" id="tcpport" style="width: 50px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
				</tr>
			</table>
		</div>
		<div id="divlogin">
			<br>
			<table class="display" id="hardwareparamslogin" border="0" cellpadding="0" cellspacing="20">
				<tr>
					<td align="right" style="width:110px"><label id="lblusername" for="name">Username:</label></td>
					<td><input type="text" id="username" style="width: 150px; padding: .2em;" class="text ui-widget-content ui-corner-all" />
				</tr>
				<tr>
					<td align="right" style="width:110px"><label id="lblpassword" for="name">Password:</label></td>
					<td><input type="password" id="password" style="width: 150px; padding: .2em;" class="text ui-widget-content ui-corner-all" />
				</tr>
			</table>
		</div>
		<br>
    <a class="btnstyle3" onclick="AddHardware();">Add</a>
</div>

<script type="text/javascript" charset="utf-8">

function DeleteHardware(idx)
{
	var bValid = false;
	bValid=(confirm("Are you sure to delete this Hardware?\n\nThis action can not be undone...\nAll Devices attached will be removed!")==true);
	if (bValid == false) {
		return;
	}
	$.ajax({
		 url: "json.htm?type=command&param=deletehardware&idx=" + idx,
		 async: false, 
		 dataType: 'json',
		 success: function(data) {
			RefreshHardwareTable();
		 },
		 error: function(){
				HideNotify();
				ShowNotify('Problem deleting hardware!', 2500, true);
		 }     
	});
}

function UpdateHardware(idx,Mode1,Mode2,Mode3,Mode4,Mode5)
{
	var name=$("#hardwarecontent #hardwareparamstable #hardwarename").val();
	if (name=="")
	{
		ShowNotify('Please enter a Name!', 2500, true);
		return;
	}

	var hardwaretype=$("#hardwarecontent #hardwareparamstable #combotype option:selected").val();
	if (typeof hardwaretype == 'undefined') {
		ShowNotify('Unknown device selected!', 2500, true);
		return;
	}
	
	var bEnabled=$('#hardwarecontent #hardwareparamstable #enabled').is(":checked");
	
	var text = $("#hardwarecontent #hardwareparamstable #combotype option:selected").text();
	if ((text.indexOf("TE923") >= 0)||(text.indexOf("Volcraft") >= 0)||(text.indexOf("1-Wire") >= 0)||(text.indexOf("BMP085") >= 0))
	{
		$.ajax({
			 url: "json.htm?type=command&param=updatehardware&htype=" + hardwaretype +
				"&port=1&name=" + name + 
				"&enabled=" + bEnabled + 
				"&idx=" + idx +
				"&Mode1=" + Mode1 + "&Mode2=" + Mode2 + "&Mode3=" + Mode3 + "&Mode4=" + Mode4 + "&Mode5=" + Mode5,
			 async: false, 
			 dataType: 'json',
			 success: function(data) {
				RefreshHardwareTable();
			 },
			 error: function(){
					ShowNotify('Problem updating hardware!', 2500, true);
			 }     
		});
	}
	else if (text.indexOf("USB") >= 0)
	{
		var serialport=$("#hardwarecontent #divserial #comboserialport option:selected").val();
		if (typeof serialport == 'undefined')
		{
			ShowNotify('No serial port selected!', 2500, true);
			return;
		}
		$.ajax({
			 url: "json.htm?type=command&param=updatehardware&htype=" + hardwaretype +
				"&port=" + serialport + 
				"&name=" + name + 
				"&enabled=" + bEnabled + 
				"&idx=" + idx +
				"&Mode1=" + Mode1 + "&Mode2=" + Mode2 + "&Mode3=" + Mode3 + "&Mode4=" + Mode4 + "&Mode5=" + Mode5,
			 async: false, 
			 dataType: 'json',
			 success: function(data) {
				RefreshHardwareTable();
			 },
			 error: function(){
					ShowNotify('Problem updating hardware!', 2500, true);
			 }     
		});
	}
	else if (text.indexOf("LAN") >= 0)
	{
		var address=$("#hardwarecontent #divremote #tcpaddress").val();
		if (address=="")
		{
			ShowNotify('Please enter an Address!', 2500, true);
			return;
		}
		var port=$("#hardwarecontent #divremote #tcpport").val();
		if (port=="")
		{
			ShowNotify('Please enter an Port!', 2500, true);
			return;
		}
		var intRegex = /^\d+$/;
		if(!intRegex.test(port)) {
			ShowNotify('Please enter an Valid Port!', 2500, true);
			return;
		}		
		$.ajax({
			 url: "json.htm?type=command&param=updatehardware&htype=" + hardwaretype + 
				"&address=" + address + 
				"&port=" + port + 
				"&name=" + name + 
				"&enabled=" + bEnabled + 
				"&idx=" + idx + 
				"&Mode1=" + Mode1 + "&Mode2=" + Mode2 + "&Mode3=" + Mode3 + "&Mode4=" + Mode4 + "&Mode5=" + Mode5,
			 async: false, 
			 dataType: 'json',
			 success: function(data) {
				RefreshHardwareTable();
			 },
			 error: function(){
					ShowNotify('Problem updating hardware!', 2500, true);
			 }     
		});
	}
	else if (text.indexOf("Domoticz") >= 0)
	{
		var address=$("#hardwarecontent #divremote #tcpaddress").val();
		if (address=="")
		{
			ShowNotify('Please enter an Address!', 2500, true);
			return;
		}
		var port=$("#hardwarecontent #divremote #tcpport").val();
		if (port=="")
		{
			ShowNotify('Please enter an Port!', 2500, true);
			return;
		}
		var intRegex = /^\d+$/;
		if(!intRegex.test(port)) {
			ShowNotify('Please enter an Valid Port!', 2500, true);
			return;
		}		
		var username=$("#hardwarecontent #divlogin #username").val();
		var password=$("#hardwarecontent #divlogin #password").val();
		$.ajax({
			 url: "json.htm?type=command&param=updatehardware&htype=" + hardwaretype +
				"&address=" + address + 
				"&port=" + port + 
				"&username=" + username + 
				"&password=" + password + 
				"&name=" + name + 
				"&enabled=" + bEnabled + 
				"&idx=" + idx + 
				"&Mode1=" + Mode1 + "&Mode2=" + Mode2 + "&Mode3=" + Mode3 + "&Mode4=" + Mode4 + "&Mode5=" + Mode5,
			 async: false, 
			 dataType: 'json',
			 success: function(data) {
				RefreshHardwareTable();
			 },
			 error: function(){
					ShowNotify('Problem updating hardware!', 2500, true);
			 }     
		});
	}
}

function AddHardware()
{
	var name=$("#hardwarecontent #hardwareparamstable #hardwarename").val();
	if (name=="")
	{
		ShowNotify('Please enter a Name!', 2500, true);
		return false;
	}

	var hardwaretype=$("#hardwarecontent #hardwareparamstable #combotype option:selected").val();
	if (typeof hardwaretype == 'undefined') {
		ShowNotify('Unknown device selected!', 2500, true);
		return;
	}
	
	var bEnabled=$('#hardwarecontent #hardwareparamstable #enabled').is(":checked");
	
	var text = $("#hardwarecontent #hardwareparamstable #combotype option:selected").text();
	if ((text.indexOf("TE923") >= 0)||(text.indexOf("Volcraft") >= 0)||(text.indexOf("1-Wire") >= 0)||(text.indexOf("BMP085") >= 0))
	{
		$.ajax({
			 url: "json.htm?type=command&param=addhardware&htype=" + hardwaretype + "&port=1&name=" + name + "&enabled=" + bEnabled,
			 async: false, 
			 dataType: 'json',
			 success: function(data) {
				RefreshHardwareTable();
			 },
			 error: function(){
					ShowNotify('Problem adding hardware!', 2500, true);
			 }     
		});
	}
	else if (text.indexOf("USB") >= 0)
	{
		var serialport=$("#hardwarecontent #divserial #comboserialport option:selected").val();
		if (typeof serialport == 'undefined')
		{
			ShowNotify('No serial port selected!', 2500, true);
			return;
		}
		$.ajax({
			 url: "json.htm?type=command&param=addhardware&htype=" + hardwaretype + "&port=" + serialport + "&name=" + name + "&enabled=" + bEnabled,
			 async: false, 
			 dataType: 'json',
			 success: function(data) {
				RefreshHardwareTable();
			 },
			 error: function(){
					ShowNotify('Problem adding hardware!', 2500, true);
			 }     
		});
	}
	else if (text.indexOf("LAN") >= 0)
	{
		var address=$("#hardwarecontent #divremote #tcpaddress").val();
		if (address=="")
		{
			ShowNotify('Please enter an Address!', 2500, true);
			return;
		}
		var port=$("#hardwarecontent #divremote #tcpport").val();
		if (port=="")
		{
			ShowNotify('Please enter an Port!', 2500, true);
			return;
		}
		var intRegex = /^\d+$/;
		if(!intRegex.test(port)) {
			ShowNotify('Please enter an Valid Port!', 2500, true);
			return;
		}		
		$.ajax({
			 url: "json.htm?type=command&param=addhardware&htype=" + hardwaretype + "&address=" + address + "&port=" + port + "&name=" + name + "&enabled=" + bEnabled,
			 async: false, 
			 dataType: 'json',
			 success: function(data) {
				RefreshHardwareTable();
			 },
			 error: function(){
					ShowNotify('Problem adding hardware!', 2500, true);
			 }     
		});
	}
	else if (text.indexOf("Domoticz") >= 0)
	{
		var address=$("#hardwarecontent #divremote #tcpaddress").val();
		if (address=="")
		{
			ShowNotify('Please enter an Address!', 2500, true);
			return;
		}
		var port=$("#hardwarecontent #divremote #tcpport").val();
		if (port=="")
		{
			ShowNotify('Please enter an Port!', 2500, true);
			return;
		}
		var intRegex = /^\d+$/;
		if(!intRegex.test(port)) {
			ShowNotify('Please enter an Valid Port!', 2500, true);
			return;
		}		
		var username=$("#hardwarecontent #divlogin #username").val();
		var password=$("#hardwarecontent #divlogin #password").val();
		$.ajax({
			 url: "json.htm?type=command&param=addhardware&htype=" + hardwaretype + "&address=" + address + "&port=" + port + "&username=" + username + "&password=" + password + "&name=" + name + "&enabled=" + bEnabled,
			 async: false, 
			 dataType: 'json',
			 success: function(data) {
				RefreshHardwareTable();
			 },
			 error: function(){
					ShowNotify('Problem adding hardware!', 2500, true);
			 }     
		});
	}
}

function EditRFXCOMMode(idx,name,Mode1,Mode2,Mode3,Mode4,Mode5)
{
	cursordefault();
	var htmlcontent = '';
	htmlcontent='<p><center><h2>Device: ' + name + '</h2></center></p>\n';
	htmlcontent+=$('#hardwaremode').html();
	$('#hardwarecontent').html(GetBackbuttonHTMLTable('ShowHardware')+htmlcontent);

	$('#hardwarecontent #submitbutton').click(function (e) {
		e.preventDefault();
		SetRFXCOMMode();
	});


	$('#hardwarecontent #idx').val(idx);
	$('#hardwarecontent #undecon').prop('checked',((Mode3 & 0x80)!=0));
	$('#hardwarecontent #X10').prop('checked',((Mode5 & 0x01)!=0));
	$('#hardwarecontent #ARC').prop('checked',((Mode5 & 0x02)!=0));
	$('#hardwarecontent #AC').prop('checked',((Mode5 & 0x04)!=0));
	$('#hardwarecontent #HomeEasyEU').prop('checked',((Mode5 & 0x08)!=0));
	$('#hardwarecontent #Meiantech').prop('checked',((Mode5 & 0x10)!=0));
	$('#hardwarecontent #OregonScientific').prop('checked',((Mode5 & 0x20)!=0));
	$('#hardwarecontent #ATIremote').prop('checked',((Mode5 & 0x40)!=0));
	$('#hardwarecontent #Visonic').prop('checked',((Mode5 & 0x80)!=0));
	$('#hardwarecontent #Mertik').prop('checked',((Mode4 & 0x01)!=0));
	$('#hardwarecontent #ADLightwaveRF').prop('checked',((Mode4 & 0x02)!=0));
	$('#hardwarecontent #HidekiUPM').prop('checked',((Mode4 & 0x04)!=0));
	$('#hardwarecontent #LaCrosse').prop('checked',((Mode4 & 0x08)!=0));
	$('#hardwarecontent #FS20').prop('checked',((Mode4 & 0x10)!=0));
	$('#hardwarecontent #ProGuard').prop('checked',((Mode4 & 0x20)!=0));
	$('#hardwarecontent #BlindT0').prop('checked',((Mode4 & 0x40)!=0));
	$('#hardwarecontent #BlindT1T2T3T4').prop('checked',((Mode4 & 0x80)!=0));
	$('#hardwarecontent #AEBlyss').prop('checked',((Mode3 & 0x01)!=0));
	$('#hardwarecontent #Rubicson').prop('checked',((Mode3 & 0x02)!=0));
	$('#hardwarecontent #FineOffsetViking').prop('checked',((Mode3 & 0x04)!=0));
	$('#hardwarecontent #Lighting4').prop('checked',((Mode3 & 0x08)!=0));
	$('#hardwarecontent #rfu4').prop('checked',((Mode3 & 0x10)!=0));
	$('#hardwarecontent #rfu5').prop('checked',((Mode3 & 0x20)!=0));
	$('#hardwarecontent #rfu6').prop('checked',((Mode3 & 0x40)!=0));

	$('#hardwarecontent #defaultbutton').click(function (e) {
		e.preventDefault();
		$('#hardwarecontent #undecon').prop('checked',false);
		$('#hardwarecontent #X10').prop('checked',true);
		$('#hardwarecontent #ARC').prop('checked',true);
		$('#hardwarecontent #AC').prop('checked',true);
		$('#hardwarecontent #HomeEasyEU').prop('checked',true);
		$('#hardwarecontent #Meiantech').prop('checked',false);
		$('#hardwarecontent #OregonScientific').prop('checked',true);
		$('#hardwarecontent #ATIremote').prop('checked',false);
		$('#hardwarecontent #Visonic').prop('checked',false);
		$('#hardwarecontent #Mertik').prop('checked',false);
		$('#hardwarecontent #ADLightwaveRF').prop('checked',false);
		$('#hardwarecontent #HidekiUPM').prop('checked',true);
		$('#hardwarecontent #LaCrosse').prop('checked',true);
		$('#hardwarecontent #FS20').prop('checked',false);
		$('#hardwarecontent #ProGuard').prop('checked',false);
		$('#hardwarecontent #BlindT0').prop('checked',false);
		$('#hardwarecontent #BlindT1T2T3T4').prop('checked',false);
		$('#hardwarecontent #AEBlyss').prop('checked',false);
		$('#hardwarecontent #Rubicson').prop('checked',false);
		$('#hardwarecontent #FineOffsetViking').prop('checked',false);
		$('#hardwarecontent #Lighting4').prop('checked',false);
		$('#hardwarecontent #rfu4').prop('checked',false);
		$('#hardwarecontent #rfu5').prop('checked',false);
		$('#hardwarecontent #rfu6').prop('checked',false);
	});
}

function EditRego6XXType(idx,name,Mode1,Mode2,Mode3,Mode4,Mode5)
{
	cursordefault();
	var htmlcontent = '';
	htmlcontent='<p><center><h2>Device: ' + name + '</h2></center></p>\n';
	htmlcontent+=$('#rego6xxtypeedit').html();
	$('#hardwarecontent').html(GetBackbuttonHTMLTable('ShowHardware')+htmlcontent);

	$('#hardwarecontent #submitbuttonrego').click(function (e) {
		e.preventDefault();
		SetRego6XXType();
	});

	$('#hardwarecontent #idx').val(idx);
	$('#hardwarecontent #comborego6xxtype').val(Mode1);
}

function SetRFXCOMMode()
{
  $.post("setrfxcommode.webem", $("#hardwarecontent #settings").serialize(), function(data) {
   SwitchLayout('Dashboard');
  });
}

function SetRego6XXType()
{
  $.post("setrego6xxtype.webem", $("#hardwarecontent #regotype").serialize(), function(data) {
   ShowHardware();
  });
}

function RefreshHardwareTable()
{
  $('#modal').show();

	$('#updelclr #hardwareupdate').attr("class", "btnstyle3-dis");
	$('#updelclr #hardwaredelete').attr("class", "btnstyle3-dis");

  var oTable = $('#hardwaretable').dataTable();
  oTable.fnClearTable();
  
  $.ajax({
     url: "json.htm?type=hardware", 
     async: false, 
     dataType: 'json',
     success: function(data) {
        
      if (typeof data.result != 'undefined') {
        $.each(data.result, function(i,item){
        
			var SerialName="Unknown!?";
			if ((item.Type == 2)||(item.Type == 3)||(item.Type == 5)||(item.Type == 6)||(item.Type == 9))
			{
				SerialName=item.Port;
			}
			else if ((item.Type == 7)||(item.Type == 11))
			{
				SerialName="USB";
			}
			else if (item.Type == 12)
			{
				SerialName="System";
			}
			else
			{
				var serpos=jQuery.inArray(item.Port, $.myglobals.SerialPortVal);
				if (serpos!=-1) {
					SerialName=$.myglobals.SerialPortStr[serpos];
				}
			}

			var enabledstr="No";
			if (item.Enabled=="true") {
				enabledstr="Yes";
			}
			
			var HwTypeStr=$.myglobals.HardwareTypesStr[item.Type];
			if (typeof HwTypeStr == 'undefined') {
				HwTypeStr="???? Unknown (NA)";
			}
			else if (
				(HwTypeStr.indexOf("RFXtrx433 USB") >= 0)||
				(HwTypeStr.indexOf("RFXtrx315 USB") >= 0)
			   )
			{
				HwTypeStr+='<br>Firmware version: ' + item.Mode2;
				HwTypeStr+=' <span class="label label-info" onclick="EditRFXCOMMode(' + item.idx + ',\'' + item.Name + '\',' + item.Mode1 + ',' + item.Mode2+ ',' + item.Mode3+ ',' + item.Mode4+ ',' + item.Mode5 + ');" onmouseover="cursorhand()" onmouseout="cursordefault()">Set Mode</span>';
			}
			else if (HwTypeStr.indexOf("Rego 6XX") >= 0)
			{
				HwTypeStr+='<br>Type: ';
				if (item.Mode1=="0")
				{
					HwTypeStr+='600-635, 637 single language';
				}
				else if(item.Mode1=="1")
				{
					HwTypeStr+='636';
				}
				else if(item.Mode1=="2")
				{
					HwTypeStr+='637 multi language';
				}
				HwTypeStr+=' <span class="label label-info" onclick="EditRego6XXType(' + item.idx + ',\'' + item.Name + '\',' + item.Mode1 + ',' + item.Mode2+ ',' + item.Mode3+ ',' + item.Mode4+ ',' + item.Mode5 + ');" onmouseover="cursorhand()" onmouseout="cursordefault()">Change Type</span>';
			}
					
			var addId = oTable.fnAddData( {
				"DT_RowId": item.idx,
				"Username": item.Username,
				"Password": item.Password,
				"Enabled": item.Enabled,
				"Mode1": item.Mode1,
				"Mode2": item.Mode2,
				"Mode3": item.Mode3,
				"Mode4": item.Mode4,
				"Mode5": item.Mode5,
				"Type" : HwTypeStr,
				"IntPort": item.Port,
                "0": item.Name,
                "1": enabledstr,
				"2": HwTypeStr,
				"3": item.Address,
				"4": SerialName
			} );
        });
		/* Add a click handler to the rows - this could be used as a callback */
		$("#hardwaretable tbody tr").click( function( e ) {
			if ( $(this).hasClass('row_selected') ) {
				$(this).removeClass('row_selected');
				$('#updelclr #hardwareupdate').attr("class", "btnstyle3-dis");
				$('#updelclr #hardwaredelete').attr("class", "btnstyle3-dis");
			}
			else {
				oTable.$('tr.row_selected').removeClass('row_selected');
				$(this).addClass('row_selected');
				$('#updelclr #hardwareupdate').attr("class", "btnstyle3");
				$('#updelclr #hardwaredelete').attr("class", "btnstyle3");
				var anSelected = fnGetSelected( oTable );
				if ( anSelected.length !== 0 ) {
					var data = oTable.fnGetData( anSelected[0] );
					var idx= data["DT_RowId"];
					$.myglobals.SelectedTimerIdx=idx;
					$("#updelclr #hardwareupdate").attr("href", "javascript:UpdateHardware(" + idx + "," + data["Mode1"] + "," + data["Mode2"] + "," + data["Mode3"] + "," + data["Mode4"] + "," + data["Mode5"] + ")");
					$("#updelclr #hardwaredelete").attr("href", "javascript:DeleteHardware(" + idx + ")");
					$("#hardwarecontent #hardwareparamstable #hardwarename").val(data["0"]);
					$("#hardwarecontent #hardwareparamstable #combotype").val(jQuery.inArray(data["Type"], $.myglobals.HardwareTypesStr));

					$('#hardwarecontent #hardwareparamstable #enabled').prop('checked',(data["Enabled"]=="true"));

					UpdateHardwareParamControls();
					if ((data["Type"].indexOf("TE923") >= 0)||(data["Type"].indexOf("Volcraft") >= 0)||(data["Type"].indexOf("1-Wire") >= 0)||(data["Type"].indexOf("BMP085") >= 0))
					{
						//nothing to be set
					}
					else
					if (data["Type"].indexOf("USB") >= 0)
					{
						$("#hardwarecontent #hardwareparamsserial #comboserialport").val(data["IntPort"]);
					}
					else
					if ((data["Type"].indexOf("LAN") >= 0)||(data["Type"].indexOf("Domoticz") >= 0))
					{
						$("#hardwarecontent #hardwareparamsremote #tcpaddress").val(data["3"]);
						$("#hardwarecontent #hardwareparamsremote #tcpport").val(data["4"]);
					}
					if (data["Type"].indexOf("Domoticz") >= 0) {
						$("#hardwarecontent #hardwareparamslogin #username").val(data["Username"]);
						$("#hardwarecontent #hardwareparamslogin #password").val(data["Password"]);
					}
				}
			}
		}); 
				
      }
     }
  });
  $('#modal').hide();
}

function UpdateHardwareParamControls()
{
	var text = $("#hardwarecontent #hardwareparamstable #combotype option:selected").text();
	if ((text.indexOf("TE923") >= 0)||(text.indexOf("Volcraft") >= 0)||(text.indexOf("BMP085") >= 0))
	{
		$("#hardwarecontent #divserial").hide();
		$("#hardwarecontent #divremote").hide();
		$("#hardwarecontent #divlogin").hide();
	}
	else if (text.indexOf("USB") >= 0)
	{
		$("#hardwarecontent #divserial").show();
		$("#hardwarecontent #divremote").hide();
		$("#hardwarecontent #divlogin").hide();
	}
	else if (text.indexOf("LAN") >= 0)
	{
		$("#hardwarecontent #divserial").hide();
		$("#hardwarecontent #divremote").show();
		$("#hardwarecontent #divlogin").hide();
	}
	else if (text.indexOf("Domoticz") >= 0)
	{
		$("#hardwarecontent #divserial").hide();
		$("#hardwarecontent #divremote").show();
		$("#hardwarecontent #divlogin").show();
	}
	else
	{
		$("#hardwarecontent #divserial").hide();
		$("#hardwarecontent #divremote").hide();
		$("#hardwarecontent #divlogin").hide();
	}
}

function ShowHardware()
{
	var oTable;
	
	$('#modal').show();
	var htmlcontent = "";
	htmlcontent+=$('#hardwaremain').html();
	$('#hardwarecontent').html(htmlcontent);
	oTable = $('#hardwaretable').dataTable( {
	  "sDom": '<"H"lfrC>t<"F"ip>',
	  "oTableTools": {
		"sRowSelect": "single",
	  },
	  "aaSorting": [[ 0, "desc" ]],
	  "bSortClasses": false,
	  "bProcessing": true,
	  "bStateSave": true,
	  "bJQueryUI": true,
	  "aLengthMenu": [[25, 50, 100, -1], [25, 50, 100, "All"]],
	  "iDisplayLength" : 25,
	  "sPaginationType": "full_numbers"
	} );

	$("#hardwarecontent #hardwareparamstable #combotype").change(function() { 
		UpdateHardwareParamControls();
	});
	
	$('#modal').hide();
	RefreshHardwareTable();
	UpdateHardwareParamControls();
}


$(document).ready(function() {
	//global var
	$.devIdx=0;
	$.myglobals = {
		HardwareTypesStr : [],
		SerialPortVal : [],
		SerialPortStr : [],
		SelectedHardwareIdx: 0
	};
	$('#hardwareparamstable #combotype > option').each(function() {
		 $.myglobals.HardwareTypesStr[$(this).val()]=$(this).text();
	});
	$('#hardwareparamsserial #comboserialport > option').each(function() {
		 $.myglobals.SerialPortStr.push($(this).text());
		 $.myglobals.SerialPortVal.push(parseInt($(this).val()));
	});
	
	ShowHardware();
} );  
</script>