<div id="dialog-findlatlong" title="Find your Geo location">
    <form>
        <table class="display" id="latlongtable" border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td align="right" style="width:60px"><label for="name">Address: </label></td>
          <td>
			<input type="text" id="address" style="width: 300px; padding: .2em;" class="text ui-widget-content ui-corner-all" /><br>
			(Example: Streetname Number City Country)
          </td>
        </tr>
        <tr>
			<td></td>
			<td><button id="getlatlong">GetLatLong</button></td>
        </tr>
        <tr>
          <td align="right"><label for="lbllat">Latitude: </label></td>
          <td><input type="text" id="latitude" style="width: 90px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
		    </tr>
        <tr>
          <td align="right"><label for="lbllng">Longitude: </label></td>
          <td><input type="text" id="longitude" style="width: 90px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
		    </tr>
		    </table>
    </form>
</div>
<div id="maindiv" class="row">
	<div class="span4 hidden-phone">
	   <div class="well sidebar-nav sb-fixed">
			<!-- Sidebar Contents -->
			<ul class="nav nav-list bs-docs-sidenav">
			  <li><a class="sb-link" id="idsystem" onmouseover="cursorhand()" onmouseout="cursordefault()"><i class="icon-chevron-right marginright"></i><span data-i18n="SystemSetup"></span></a></li>
			  <li><a class="sb-link" id="idloghistory" onmouseover="cursorhand()" onmouseout="cursordefault()"><i class="icon-chevron-right marginright"></i><span data-i18n="Log History"></span></a></li>
			  <li><a class="sb-link" id="idnotifications" onmouseover="cursorhand()" onmouseout="cursordefault()"><i class="icon-chevron-right marginright"></i><span data-i18n="Notifications"></span></a></li>
			  <li><a class="sb-link" id="idemailsetup" onmouseover="cursorhand()" onmouseout="cursordefault()"><i class="icon-chevron-right marginright"></i><span data-i18n="Email Setup"></span></a></li>
			  <li><a class="sb-link" id="idmetercounters" onmouseover="cursorhand()" onmouseout="cursordefault()"><i class="icon-chevron-right marginright"></i><span data-i18n="Meter/Counter Setup"></span></a></li>
			  <li><a class="sb-link" id="idothersettings" onmouseover="cursorhand()" onmouseout="cursordefault()"><i class="icon-chevron-right marginright"></i><span data-i18n="Other Settings"></span></a></li>
			  <li class="divider"></li>
			  <center><a data-i18n="Backup Database" class="btn btn-inverse" href="backupdatabase.php">Backup Database</a></center>
			  <li class="divider"></li>
			</ul>
			<center><a data-i18n="Save" class="btn btn-danger" href="javascript:StoreSettings()">Save</a></center>
	   </div>
	</div>

	<div id="settingscontent" class="span8">
		<form id="settings">
		<!-- Location
		================================================== -->
		<section id="system">
			<div class="page-header-small">
				<h1 data-i18n="SystemSetup">System Setup</h1>
			</div>
			<h2><span data-i18n="User Interface"></span>:</h2>
			<table class="display" id="languagetable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label for="Latitude">Language: </label></td>
				<td>
					<select id="combolanguage" name="Language" style="width:160px" class="combobox ui-corner-all">
					<!--#embed combolanguage -->
					</select>			
				</td>
			</tr>
			</table>
			<br>
			<h2><span data-i18n="Location"></span>:</h2>
			<label id="sunriseset"></label>
			<table class="display" id="locationtable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label for="Latitude"><span data-i18n="Latitude"></span>: </label></td>
				<td><input type="text" id="Latitude" name="Latitude" style="width: 150px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			<tr>
				<td align="right"><label for="Longitude"><span data-i18n="Longitude"></span>: </label></td>
				<td><input type="text" id="Longitude" name="Longitude" style="width: 150px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			</table>
			<span data-i18n="ToFindGeo"></span> <a class="norm-link" onclick="GetGeoLocation();" onMouseover="cursorhand()" onMouseout="cursordefault()"><span data-i18n="Here"></span></a><br>
			<br>
			<h2><span data-i18n="Dashboard"></span>:</h2>
			<table class="display" id="dashmodetable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Mode"></span>: </label></td>
				<td><select id="combosdashtype" name="DashboardType" style="width:120px" class="combobox ui-corner-all">
					<option data-i18n="Normal" value="0">Normal</option>
					<option data-i18n="Compact" value="1">Compact</option>
					<option data-i18n="Mobile" value="2">Mobile</option>
				</select></td>
			</tr>
			</table>
			<br>
			<h2><span data-i18n="Mobile"></span>:</h2>
			<table class="display" id="mobilemodetable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Mode"></span>: </label></td>
				<td><select id="combosmobiletype" name="MobileType" style="width:120px" class="combobox ui-corner-all">
					<option data-i18n="Mobile" value="0">Mobile</option>
					<option data-i18n="Dashboard" value="1">Dashboard</option>
				</select></td>
			</tr>
			</table>
			<br>
			<h2><span data-i18n="WebsiteProtection"></span>:</h2>
			<table class="display" id="webtable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Username"></span>: </label></td>
				<td><input type="input" id="WebUserName" name="WebUserName" style="width: 200px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Password"></span>: </label></td>
				<td><input type="password" id="WebPassword" name="WebPassword" style="width: 200px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Authentication"></span>: </label></td>
				<td><select id="comboauthmethod" name="AuthenticationMethod" style="width:140px" class="combobox ui-corner-all">
					<option data-i18n="Login Page" value="0">Login Page</option>
					<option data-i18n="Basic-Auth" value="1">Basic-Auth</option>
				</select></td>
			</tr>
			<tr style="display:none;">
				<td align="right" style="width:60px"><label><span data-i18n="Guest User">Guest User</span>: </label></td>
				<td><select id="comboguestuser" name="GuestUser" style="width:140px" class="combobox ui-corner-all">
					<option data-i18n="None" value="0">None</option>
				</select></td>
			</tr>
			</table>
			<br>
			<h2><span data-i18n="SecurityPanel"></span>:</h2>
			<table class="display" id="sectable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Password"></span>: </label></td>
				<td><input type="password" id="SecPassword" name="SecPassword" style="width: 200px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Delay">Delay</span>: </label></td>
				<td>
					<input type="input" id="SecOnDelay" name="SecOnDelay" style="width: 70px; padding: .2em;" class="text ui-widget-content ui-corner-all" />&nbsp;
					<span data-i18n="(seconds, 0=no delay)"></span>
				</td>
			</tr>
			</table>
			<br>
			<span data-i18n="LocalNetworks(no_username/password)"></span>:<br><br>
			<table class="display" id="weblocaltable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Networks"></span>: </label></td>
				<td>
					<input type="input" id="WebLocalNetworks" name="WebLocalNetworks" style="width: 300px; padding: .2em;" class="text ui-widget-content ui-corner-all" /><br>
					<span data-i18n="(Separate by a semicolon, For Example"></span>: 127.0.0.*;192.168.0.*)
				</td>
			</tr>
			</table>
			<br>
			<span data-i18n="RemoteSharedPortForDomoticzClients"></span>:<br><br>
			<table class="display" id="remotesharedtable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Port"></span>: </label></td>
				<td><input type="input" id="RemoteSharedPort" name="RemoteSharedPort" style="width: 70px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			</table>
			<br>
			<div id="SoftwareUpdates">
				<h2><span data-i18n="SoftwareUpdates"></span>:</h2>
				<table class="display" id="autoupdatetable" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td colspan="2"><input type="checkbox" id="checkforupdates" name="checkforupdates"/> <span data-i18n="CheckForSoftwareUpdates"></span></td>
					</tr>
					<tr>
						<td align="right" style="width:130px"><label><span data-i18n="Release Channel">Release Channel</span>: </label></td>
						<td><select id="comboReleaseChannel" name="ReleaseChannel" style="width:140px" class="combobox ui-corner-all">
							<option data-i18n="Stable" value="0">Stable</option>
							<option data-i18n="Beta" value="1">Beta</option>
						</select></td>
					</tr>
				</table>
			</div>
			<br>
			<div id="AutoBackup">
				<h2><span data-i18n="AutoBackup"></span>:</h2>
				<table class="display" id="autobackuptable" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td colspan="2"><input type="checkbox" id="enableautobackup" name="enableautobackup"/> <span data-i18n="EnableAutoBackup"></span></td>
					</tr>
				</table>
			</div>
			<br>			
			<div id="NewHardware">
				<h2><span data-i18n="AcceptNewHardware">Hardware/Devices</span>:</h2>
				<table class="display" id="acceptnewhardwaretable" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td colspan="2"><input type="checkbox" id="AcceptNewHardware" name="AcceptNewHardware"/> <span data-i18n="AcceptNewHardwareDevices">Accept new Hardware Devices</span></td>
					</tr>
				</table>
			</div>
			<br>			
			<div id="ActiveTabs">
				<h2><span data-i18n="ActiveMenus"></span>:</h2>
				<table class="display" id="activemenustable" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td><input type="checkbox" id="EnableTabLights" name="EnableTabLights"/> <span data-i18n="Switches"></span></td>
					</tr>
					<tr>
						<td><input type="checkbox" id="EnableTabScenes" name="EnableTabScenes"/> <span data-i18n="Scenes"></span></td>
					</tr>
					<tr>
						<td><input type="checkbox" id="EnableTabTemp" name="EnableTabTemp"/> <span data-i18n="Temperature"></span></td>
					</tr>
					<tr>
						<td><input type="checkbox" id="EnableTabWeather" name="EnableTabWeather"/> <span data-i18n="Weather"></span></td>
					</tr>
					<tr>
						<td><input type="checkbox" id="EnableTabUtility" name="EnableTabUtility"/> <span data-i18n="Utility"></span></td>
					</tr>
				</table>
			</div>
		</section>

		<!-- Log History
		================================================== -->
		<section id="loghistory">
		  <div class="page-header-small">
			<h1 data-i18n="Log History">Log History</h1>
		  </div>
			<h2><span data-i18n="Light/Switches"></span>:</h2>
			<table class="display" id="lightlogtable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Days"></span>: </label></td>
				<td><input type="text" id="LightHistoryDays" name="LightHistoryDays" style="width: 50px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			</table>
			<br>
			<h2><span data-i18n="Short Log Sensors"></span>:</h2>
			<table class="display" id="shortlogtable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Days"></span>: </label></td>
				<td><select id="comboshortlogdays" name="ShortLogDays" style="width:60px" class="combobox ui-corner-all">
					<option value="1">1</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5</option>
					<option value="6">6</option>
					<option value="7">7</option>
				</select></td>
			</tr>
			</table>
		</section>

		<!-- Notification system
		================================================== -->
		<section id="notifications">
			<div class="page-header-small">
				<h1 data-i18n="Notifications">Notifications</h1>
			</div>
			<h2><span data-i18n="Prowl (iPhone/iPad)"></span>:</h2>
			<table class="display" id="prowltable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:80px"><label for="apikey"><span data-i18n="API Key"></span>: </label></td>
				<td><input type="input" id="apikey" name="ProwlAPIKey" style="width: 300px; padding: .2em;" class="text ui-widget-content ui-corner-all" />  <a data-i18n="Test" class="btnstyle3" href="javascript:TestProwlNotification()">Test</a></td>
			</tr>
			</table>
			<span data-i18n="To get a free account/API key click"></span> <a class="norm-link" href="https://www.prowlapp.com/" target="_blank"><span data-i18n="Here"></span></a><br>
			<br>
			<h2><span data-i18n="NMA (Android)"></span>:</h2>
			<table class="display" id="nmatable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:80px"><label for="apikey"><span data-i18n="API Key"></span>: </label></td>
				<td><input type="input" id="apikey" name="NMAAPIKey" style="width: 356px; padding: .2em;" class="text ui-widget-content ui-corner-all" />  <a data-i18n="Test" class="btnstyle3" href="javascript:TestNMANotification()">Test</a></td>
			</tr>
			</table>
			<h2><span data-i18n="Pushover (Android/iOs)"></span>:</h2>
			<table class="display" id="pushovertable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:40px"><label for="pouserid"><span data-i18n="User ID"></span>: </label></td>
				<td><input type="input" id="pouserid" name="PushoverUserID" style="width: 356px; padding: .2em;" class="text ui-widget-content ui-corner-all" />  </td>
			</tr>
			<tr>
				<td align="right" style="width:80px"><label for="poapikey"><span data-i18n="API Key"></span>: </label></td>
				<td><input type="input" id="apikey" name="PushoverAPIKey" style="width: 356px; padding: .2em;" class="text ui-widget-content ui-corner-all" />  <a data-i18n="Test" class="btnstyle3" href="javascript:TestPushoverNotification()">Test</a></td>
			</tr>
			</table>
			<span data-i18n="To get a free account/API key click"></span> <a class="norm-link" href="https://pushover.net" target="_blank"><span data-i18n="Here"></span></a><br>
			<br>
			<h2><span data-i18n="Notification Intervals"></span>:</h2>
			<table class="display" id="nitable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Sensors"></span>: </label></td>
				<td><select id="comboNotificationSensorInterval" name="NotificationSensorInterval" style="width:100px" class="combobox ui-corner-all">
					<option data-i18n="1 Minute" value="60">1 Minute</option>
					<option data-i18n="5 Minutes" value="300">5 Minutes</option>
					<option data-i18n="10 Minutes" value="600">10 Minutes</option>
					<option data-i18n="15 Minutes" value="900">15 Minutes</option>
					<option data-i18n="30 Minutes" value="1800">30 Minutes</option>
					<option data-i18n="1 Hour" value="3600">1 Hour</option>
					<option data-i18n="2 Hours" value="7200">2 Hours</option>
					<option data-i18n="3 Hours" value="10800">3 Hours</option>
					<option data-i18n="4 Hours" value="14400">4 Hours</option>
					<option data-i18n="5 Hours" value="18000">5 Hours</option>
					<option data-i18n="6 Hours" value="21600">6 Hours</option>
					<option data-i18n="7 Hours" value="25200">7 Hours</option>
					<option data-i18n="8 Hours" value="28800">8 Hours</option>
					<option data-i18n="9 Hours" value="32400">9 Hours</option>
					<option data-i18n="10 Hours" value="36000">10 Hours</option>
					<option data-i18n="11 Hours" value="39600">11 Hours</option>
					<option data-i18n="12 Hours" value="43200">12 Hours</option>
					<option data-i18n="13 Hours" value="46800">13 Hours</option>
					<option data-i18n="14 Hours" value="50400">14 Hours</option>
					<option data-i18n="15 Hours" value="54000">15 Hours</option>
					<option data-i18n="16 Hours" value="57600">16 Hours</option>
					<option data-i18n="17 Hours" value="61200">17 Hours</option>
					<option data-i18n="18 Hours" value="64800">18 Hours</option>
					<option data-i18n="19 Hours" value="68400">19 Hours</option>
					<option data-i18n="20 Hours" value="72000">20 Hours</option>
					<option data-i18n="21 Hours" value="75600">21 Hours</option>
					<option data-i18n="22 Hours" value="79200">22 Hours</option>
					<option data-i18n="23 Hours" value="82800">23 Hours</option>
					<option data-i18n="24 Hours" value="86400">24 Hours</option>
				</select></td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Switches"></span>: </label></td>
				<td><select id="comboNotificationSwitchesInterval" name="NotificationSwitchInterval" style="width:100px" class="combobox ui-corner-all">
					<option data-i18n="Direct" value="0">Direct</option>
					<option data-i18n="1 Minute" value="60">1 Minute</option>
					<option data-i18n="5 Minutes" value="300">5 Minutes</option>
					<option data-i18n="10 Minutes" value="600">10 Minutes</option>
					<option data-i18n="15 Minutes" value="900">15 Minutes</option>
					<option data-i18n="30 Minutes" value="1800">30 Minutes</option>
					<option data-i18n="1 Hour" value="3600">1 Hour</option>
					<option data-i18n="2 Hours" value="7200">2 Hour</option>
					<option data-i18n="3 Hours" value="10800">3 Hour</option>
					<option data-i18n="4 Hours" value="14400">4 Hour</option>
					<option data-i18n="5 Hours" value="18000">5 Hour</option>
					<option data-i18n="6 Hours" value="21600">6 Hour</option>
					<option data-i18n="7 Hours" value="25200">7 Hour</option>
					<option data-i18n="8 Hours" value="28800">8 Hour</option>
					<option data-i18n="9 Hours" value="32400">9 Hour</option>
					<option data-i18n="10 Hours" value="36000">10 Hour</option>
					<option data-i18n="11 Hours" value="39600">11 Hour</option>
					<option data-i18n="12 Hours" value="43200">12 Hours</option>
					<option data-i18n="13 Hours" value="46800">13 Hours</option>
					<option data-i18n="14 Hours" value="50400">14 Hours</option>
					<option data-i18n="15 Hours" value="54000">15 Hours</option>
					<option data-i18n="16 Hours" value="57600">16 Hours</option>
					<option data-i18n="17 Hours" value="61200">17 Hours</option>
					<option data-i18n="18 Hours" value="64800">18 Hours</option>
					<option data-i18n="19 Hours" value="68400">19 Hours</option>
					<option data-i18n="20 Hours" value="72000">20 Hours</option>
					<option data-i18n="21 Hours" value="75600">21 Hours</option>
					<option data-i18n="22 Hours" value="79200">22 Hours</option>
					<option data-i18n="23 Hours" value="82800">23 Hours</option>
					<option data-i18n="24 Hours" value="86400">24 Hours</option>
				</select></td>
			</tr>
			</table>
		</section>

		<!-- Email Setup
		================================================== -->
		<section id="emailsetup">
		  <div class="page-header-small">
			<h1 data-i18n="Email Setup">Email Setup</h1>
		  </div>
			<table class="display" id="emailtable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="From"></span>: </label></td>
				<td><input type="email" id="EmailFrom" name="EmailFrom" style="width: 180px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="To"></span>: </label></td>
				<td><input type="email" id="EmailTo" name="EmailTo" style="width: 300px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			<tr>
				<td></td>
				<td><span data-i18n="(Separate by a semicolon, For Example"></span>: user@mail.com;user2@mail.com)</td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Server"></span>: </label></td>
				<td><input type="input" id="EmailServer" name="EmailServer" style="width: 200px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Port"></span>: </label></td>
				<td><input type="input" id="EmailPort" name="EmailPort" style="width: 40px; padding: .2em;" class="text ui-widget-content ui-corner-all" /> <span data-i18n="(default 25, StartTLS Port 587, SSL Port 465)"></span></td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><label><span data-i18n="Username"></span>: </label></td>
				<td><input type="input" id="EmailUsername" name="EmailUsername" style="width: 200px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Password"></span>: </label></td>
				<td><input type="password" id="EmailPassword" name="EmailPassword" style="width: 200px; padding: .2em;" class="text ui-widget-content ui-corner-all" />  <a data-i18n="Test" class="btnstyle3" href="javascript:TestEmailNotification()">Test</a></td>
			</tr>
			<tr>
				<td></td>
				<td><input type="checkbox" id="useemailinnotificationsalerts" name="useemailinnotificationsalerts"/> <span data-i18n="Send Email Notification Alerts"></span></td>
			</tr>
			<tr>
				<td></td>
				<td><input type="checkbox" id="checkEmailAsAttachment" name="EmailAsAttachment"/> <span data-i18n="Send Camera snapshots as Attachment (Gmail)"></span></td>
			</tr>
			</table>
		</section>

		<!-- Meter Settings
		================================================== -->
		<section id="metercounters">
		  <div class="page-header-small">
			<h1 data-i18n="Meter/Counter Setup">Meter/Counter Setup</h1>
		  </div>
			<h2><span data-i18n="Wind Meter"></span>:</h2>
			<table class="display" id="windmetertable" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td align="right" style="width:60px"><label><span data-i18n="Display"></span>: </label></td>
					<td><select id="comboWindUnit" name="WindUnit" style="width:120px" class="combobox ui-corner-all">
						<option value="0">m/s</option>
						<option value="1">km/h</option>
						<option value="2">mph</option>
						<option value="3">Knots</option>
					</select></td>
				</tr>
			</table>
			<br>
			<h2><span data-i18n="Temperature"></span>:</h2>
			<table class="display" id="temperaturetable" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td align="right" style="width:60px"><label><span data-i18n="Display"></span>: </label></td>
					<td><select id="comboTempUnit" name="TempUnit" style="width:120px" class="combobox ui-corner-all">
						<option value="0">Celcius</option>
						<option value="1">Fahrenheit</option>
					</select></td>
				</tr>
			</table>
			<br>
			<h2><span data-i18n="RFXMeter/Counter Dividers"></span>:</h2>
			<table class="display" id="rfxmetertable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Energy"></span>: </label></td>
				<td><input type="input" id="EnergyDivider" name="EnergyDivider" style="width: 80px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
				<td align="right" style="width:90px"><label><span data-i18n="Costs"></span> T1: </label></td>
				<td><input type="input" id="CostEnergy" name="CostEnergy" style="width: 60px; padding: .2em;" class="text ui-widget-content ui-corner-all" /> / kWh</td>
				<td align="right" style="width:90px"><label><span data-i18n="Costs"></span> T2: </label></td>
				<td><input type="input" id="CostEnergyT2" name="CostEnergyT2" style="width: 60px; padding: .2em;" class="text ui-widget-content ui-corner-all" /> / kWh</td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Gas"></span>: </label></td>
				<td><input type="input" id="GasDivider" name="GasDivider" style="width: 80px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
				<td align="right" style="width:60px"><label><span data-i18n="Costs"></span>: </label></td>
				<td><input type="input" id="CostGas" name="CostGas" style="width: 60px; padding: .2em;" class="text ui-widget-content ui-corner-all" /> / m3</td>
			</tr>
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Water"></span>: </label></td>
				<td><input type="input" id="WaterDivider" name="WaterDivider" style="width: 80px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
				<td align="right" style="width:60px"><label><span data-i18n="Costs"></span>: </label></td>
				<td><input type="input" id="CostWater" name="CostWater" style="width: 60px; padding: .2em;" class="text ui-widget-content ui-corner-all" /> / m3</td>
			</tr>
			</table>
			<br>
			<h2>OWL CM113/CM180i:</h2>
			<table class="display" id="owl113table" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td align="right" style="width:60px"><label><span data-i18n="Voltage"></span>: </label></td>
					<td><input type="input" id="ElectricVoltage" name="ElectricVoltage" style="width: 40px; padding: .2em;" class="text ui-widget-content ui-corner-all" /></td>
				</tr>
				<tr>
					<td align="right" style="width:60px"><label><span data-i18n="Display"></span>: </label></td>
					<td><select id="comboscm113type" name="CM113DisplayType" style="width:120px" class="combobox ui-corner-all">
						<option value="0">Ampere</option>
						<option value="1">Watt</option>
					</select></td>
				</tr>
			</table>
			<br>
			<h2><span data-i18n="P1 Smart Meter Type"></span>:</h2>
			<table class="display" id="p1metertable" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td align="right" style="width:60px"><label><span data-i18n="Type"></span>: </label></td>
					<td><select id="comboP1MeterType" name="SmartMeterType" style="width:160px" class="combobox ui-corner-all">
						<option data-i18n="With Decimals" value="0">With Decimals</option>
						<option data-i18n="No Decimals" value="1">No Decimals</option>
					</select></td>
				</tr>
			</table>
		</section>

		<!-- Other Settings
		================================================== -->
		<section id="othersettings">
		  <div class="page-header-small">
			<h1 data-i18n="Other Settings"></h1>
		  </div>
			<h2><span data-i18n="Random Timer"></span>:</h2>
			<table class="display" id="randomtable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Spread"></span>: </label></td>
				<td><input type="input" id="RandomSpread" name="RandomSpread" style="width: 50px; padding: .2em;" class="text ui-widget-content ui-corner-all" /> <span data-i18n="(Minutes +/-)"></span></td>
			</tr>
			</table>
			<br>
			<h2><span data-i18n="Doorbell Command"></span>:</h2>
			<table class="display" id="doorbelltable" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td align="right" style="width:60px"><label><span data-i18n="Command"></span>: </label></td>
					<td><select id="comboDoorbellCommand" name="DoorbellCommand" style="width:120px" class="combobox ui-corner-all">
						<option data-i18n="Group On" value="0">Group On</option>
						<option data-i18n="On" value="1">On</option>
					</select></td>
				</tr>
			</table>
			<br>
			<h2><span data-i18n="Raspberry Pi Camera Parameters"></span>:</h2>
			<table class="display" id="picamtable" border="0" cellpadding="0" cellspacing="0">
			<tr>
				<td align="right" style="width:60px"><label><span data-i18n="Params"></span>: </label></td>
				<td>
					<input type="input" id="RaspCamParams" name="RaspCamParams" style="width: 300px; padding: .2em;" class="text ui-widget-content ui-corner-all" /><br>
					(<span data-i18n="default"></span>: -w 800 -h 600 -t 0)
				</td>
			</tr>
			</table>
		</section>
		<br>
		<section id="savesettings">
			<a data-i18n="Save" class="btn btn-danger" href="javascript:StoreSettings()">Save</a>
		</section>
		<br>
		</form>
	</div>
</div>

<script type="text/javascript" charset="utf-8"> 

var googleMapsCallback;

function GetGeoLocation() {
	googleMapsCallback = function() {
		$( "#dialog-findlatlong" ).dialog( "open" );
  };
  $.ajax({
        url: "https://maps.googleapis.com/maps/api/js?v=3&callback=googleMapsCallback&sensor=false",
        dataType: "script"
  });
}

function TestProwlNotification()
{
  var ProwlAPI=$("#prowltable #apikey").val();
  if (ProwlAPI=="") {
    ShowNotify($.i18n('Please enter the API key!...'), 3500, true);
    return;
  }
  var url="http://api.prowlapp.com/publicapi/add?apikey=" + ProwlAPI + "&priority=0&application=Domoticz&event=Test Message&description=This is a test message!";
  $.get(url, function(data) {
  });  
  ShowNotify($.i18n('Notification send!<br>Should arrive at your device soon...'), 3000);
}

function TestNMANotification()
{
  var NMAAPI=$("#nmatable #apikey").val();
  if (NMAAPI=="") {
    ShowNotify($.i18n('Please enter the API key!...'), 3500, true);
    return;
  }
  var url="http://www.notifymyandroid.com/publicapi/notify?apikey=" + NMAAPI + "&priority=0&application=Domoticz&event=Test Message&description=This is a test message!";
  $.get(url, function(data) {
  });  
  ShowNotify($.i18n('Notification send!<br>Should arrive at your device soon...'), 3000);
}

function TestPushoverNotification()
{
  var POAPI=$("#pushovertable #apikey").val();
  if (POAPI=="") {
    ShowNotify($.i18n('Please enter the API key!...'), 3500, true);
    return;
  }
  var POUSERID=$("#pushovertable #pouserid").val();
  if (POUSERID=="") {
    ShowNotify($.i18n('Please enter the user id!...'), 3500, true);
    return;
  }
	$.ajax({
		url: "json.htm?type=command&param=testpushover&poapi="+POAPI+"&pouser="+POUSERID,
		async: false, 
		dataType: 'json',
		success: function(data) {
			if (data.status != "OK") {
				HideNotify();
				ShowNotify($.i18n('Problem sending notification, please check credentials!'), 3000, true);
				return;
			}
			else {
				HideNotify();
				ShowNotify($.i18n('Notification send!<br>Should arrive at your device soon...'), 3000);
			}
		},
		error: function(){
			HideNotify();
			ShowNotify($.i18n('Problem sending notification, please check credentials!'), 3000, true);
		}
	});
  
}

function TestEmailNotification()
{
	var EmailServer=$("#emailtable #EmailServer").val();
	if (EmailServer=="") {
		ShowNotify($.i18n('Invalid Email Settings...'), 2000, true);
		return;
	}
	var EmailPort=$("#emailtable #EmailPort").val();
	if (EmailPort=="") {
		ShowNotify($.i18n('Invalid Email Settings...'), 2000, true);
		return;
	}
	var EmailFrom=$("#emailtable #EmailFrom").val();
	var EmailTo=$("#emailtable #EmailTo").val();
	var EmailUsername=$("#emailtable #EmailUsername").val();
	var EmailPassword=$("#emailtable #EmailPassword").val();
	if ((EmailFrom=="")||(EmailTo=="")) {
		ShowNotify($.i18n('Invalid Email From/To Settings...'), 2000, true);
		return;
	}
	if ((EmailUsername!="")&&(EmailPassword=="")) {
		ShowNotify($.i18n('Please enter an Email Password...'), 2000, true);
		return;
	}
	$.ajax({
		url: "json.htm?type=command&param=testemail"+
			"&EmailFrom="+EmailFrom+
			"&EmailTo="+EmailTo+
			"&EmailServer="+EmailServer+
			"&EmailPort="+EmailPort+
			"&EmailUsername="+EmailUsername+
			"&EmailPassword="+EmailPassword, 
		async: false, 
		dataType: 'json',
		success: function(data) {
			if (data.status != "OK") {
				HideNotify();
				ShowNotify($.i18n('Problem sending Email, please check credentials!'), 2500, true);
				return;
			}
			else {
				HideNotify();
				ShowNotify($.i18n('An Email has been delivered<br>Please check your inbox!'), 2500);
			}
		},
		error: function(){
			HideNotify();
			ShowNotify($.i18n('Problem sending Email, please check credentials!'), 2500, true);
		}
	});
}

function ShowSettings()
{
  var sunRise="";
  var sunSet="";
  $.ajax({
     url: "json.htm?type=command&param=getSunRiseSet",
     async: false, 
     dataType: 'json',
     success: function(data) {
        if (typeof data.Sunrise != 'undefined') {
          sunRise=data.Sunrise;
          sunSet=data.Sunset;
        }
     }
  });
  
	var suntext="";
  if (sunRise!="")
  {
    suntext='<br>' + $.i18n('SunRise') + ': ' + sunRise + ', ' + $.i18n('SunSet') + ': ' + sunSet + '<br><br>\n';
    $("#sunriseset").html(suntext);
  }
  

  $.ajax({
     url: "json.htm?type=settings", 
     async: false, 
     dataType: 'json',
     success: function(data) {
      if (typeof data.Location != 'undefined') {
        $("#locationtable #Latitude").val(data.Location.Latitude);
        $("#locationtable #Longitude").val(data.Location.Longitude);
      }
      if (typeof data.ProwlAPI != 'undefined') {
        $("#prowltable #apikey").val(data.ProwlAPI);
      }
      if (typeof data.NMAAPI != 'undefined') {
        $("#nmatable #apikey").val(data.NMAAPI);
      }
      if (typeof data.PushoverAPI != 'undefined') {
        $("#pushovertable #apikey").val(data.PushoverAPI);
      }
      if (typeof data.PushoverUser != 'undefined') {
        $("#pushovertable #pouserid").val(data.PushoverUser);
      }
      if (typeof data.LightHistoryDays != 'undefined') {
        $("#lightlogtable #LightHistoryDays").val(data.LightHistoryDays);
      }
      if (typeof data.ShortLogDays != 'undefined') {
        $("#shortlogtable #comboshortlogdays").val(data.ShortLogDays);
      }
      if (typeof data.DashboardType != 'undefined') {
        $("#dashmodetable #combosdashtype").val(data.DashboardType);
      }
      if (typeof data.MobileType != 'undefined') {
        $("#mobilemodetable #combosmobiletype").val(data.MobileType);
      }
      if (typeof data.WebUserName != 'undefined') {
        $("#webtable #WebUserName").val(data.WebUserName);
      }
      if (typeof data.WebPassword != 'undefined') {
        $("#webtable #WebPassword").val(data.WebPassword);
      }
      if (typeof data.SecPassword != 'undefined') {
        $("#sectable #SecPassword").val(data.SecPassword);
      }
      if (typeof data.WebLocalNetworks != 'undefined') {
        $("#weblocaltable #WebLocalNetworks").val(data.WebLocalNetworks);
      }
      if (typeof data.EnergyDivider != 'undefined') {
        $("#rfxmetertable #EnergyDivider").val(data.EnergyDivider);
      }
      if (typeof data.CostEnergy != 'undefined') {
        $("#rfxmetertable #CostEnergy").val(data.CostEnergy);
      }
      if (typeof data.CostEnergyT2 != 'undefined') {
        $("#rfxmetertable #CostEnergyT2").val(data.CostEnergyT2);
      }
      if (typeof data.GasDivider != 'undefined') {
        $("#rfxmetertable #GasDivider").val(data.GasDivider );
      }
      if (typeof data.CostGas!= 'undefined') {
        $("#rfxmetertable #CostGas").val(data.CostGas);
      }
      if (typeof data.WaterDivider != 'undefined') {
        $("#rfxmetertable #WaterDivider").val(data.WaterDivider );
      }
      if (typeof data.CostWater!= 'undefined') {
        $("#rfxmetertable #CostWater").val(data.CostWater);
      }
      if (typeof data.RandomTimerFrame != 'undefined') {
        $("#randomtable #RandomSpread").val(data.RandomTimerFrame );
      }
      if (typeof data.ElectricVoltage!= 'undefined') {
        $("#owl113table #ElectricVoltage").val(data.ElectricVoltage);
      }
      if (typeof data.CM113DisplayType != 'undefined') {
        $("#owl113table #comboscm113type").val(data.CM113DisplayType);
      }
      if (typeof data.WindUnit != 'undefined') {
        $("#windmetertable #comboWindUnit").val(data.WindUnit);
      }
      if (typeof data.TempUnit != 'undefined') {
        $("#temperaturetable #comboTempUnit").val(data.TempUnit);
      }
      if (typeof data.UseAutoUpdate != 'undefined') {
        $("#autoupdatetable #checkforupdates").prop('checked',data.UseAutoUpdate==1);
      }
	  if (typeof data.UseAutoBackup != 'undefined') {
        $("#autobackuptable #enableautobackup").prop('checked',data.UseAutoBackup==1);
      }
      if (typeof data.EmailFrom!= 'undefined') {
        $("#emailtable #EmailFrom").val(data.EmailFrom);
      }
      if (typeof data.EmailTo!= 'undefined') {
        $("#emailtable #EmailTo").val(data.EmailTo);
      }
      if (typeof data.EmailServer!= 'undefined') {
        $("#emailtable #EmailServer").val(data.EmailServer);
      }
      if (typeof data.EmailPort!= 'undefined') {
        $("#emailtable #EmailPort").val(data.EmailPort);
      }
      if (typeof data.EmailUsername!= 'undefined') {
        $("#emailtable #EmailUsername").val(data.EmailUsername);
      }
      if (typeof data.EmailPassword!= 'undefined') {
        $("#emailtable #EmailPassword").val(data.EmailPassword);
      }
      if (typeof data.UseEmailInNotifications != 'undefined') {
        $("#emailtable #useemailinnotificationsalerts").prop('checked',data.UseEmailInNotifications==1);
      }
      if (typeof data.EmailAsAttachment != 'undefined') {
        $("#emailtable #checkEmailAsAttachment").prop('checked',data.EmailAsAttachment==1);
      }
      if (typeof data.DoorbellCommand != 'undefined') {
        $("#doorbelltable #comboDoorbellCommand").val(data.DoorbellCommand);
      }
      if (typeof data.SmartMeterType != 'undefined') {
        $("#p1metertable #comboP1MeterType").val(data.SmartMeterType);
      }
      if (typeof data.EnableTabLights != 'undefined') {
        $("#activemenustable #EnableTabLights").prop('checked',data.EnableTabLights==1);
      }
      if (typeof data.EnableTabScenes != 'undefined') {
        $("#activemenustable #EnableTabScenes").prop('checked',data.EnableTabScenes==1);
      }
      if (typeof data.EnableTabTemp != 'undefined') {
        $("#activemenustable #EnableTabTemp").prop('checked',data.EnableTabTemp==1);
      }
      if (typeof data.EnableTabWeather != 'undefined') {
        $("#activemenustable #EnableTabWeather").prop('checked',data.EnableTabWeather==1);
      }
      if (typeof data.EnableTabUtility != 'undefined') {
        $("#activemenustable #EnableTabUtility").prop('checked',data.EnableTabUtility==1);
      }
      if (typeof data.NotificationSensorInterval != 'undefined') {
        $("#nitable #comboNotificationSensorInterval").val(data.NotificationSensorInterval);
      }
      if (typeof data.NotificationSwitchInterval != 'undefined') {
        $("#nitable #comboNotificationSwitchesInterval").val(data.NotificationSwitchInterval);
      }
      if (typeof data.RemoteSharedPort != 'undefined') {
        $("#remotesharedtable #RemoteSharedPort").val(data.RemoteSharedPort);
      }
      if (typeof data.Language != 'undefined') {
        $("#languagetable #combolanguage").val(data.Language);
      }
      if (typeof data.AuthenticationMethod != 'undefined') {
        $("#webtable #comboauthmethod").val(data.AuthenticationMethod);
      }
      if (typeof data.ReleaseChannel != 'undefined') {
        $("#autoupdatetable #comboReleaseChannel").val(data.ReleaseChannel);
      }
      if (typeof data.RaspCamParams != 'undefined') {
        $("#picamtable #RaspCamParams").val(data.RaspCamParams );
      }
	  if (typeof data.AcceptNewHardware != 'undefined') {
        $("#acceptnewhardwaretable #AcceptNewHardware").prop('checked',data.AcceptNewHardware==1);
      }
      if (typeof data.SecOnDelay != 'undefined') {
        $("#sectable #SecOnDelay").val(data.SecOnDelay);
      }
     }
  });
}

function StoreSettings(formname)
{
  var Latitude=$("#locationtable #Latitude").val();
  var Longitude=$("#locationtable #Longitude").val();
  if (
      ((Latitude=="")||(Longitude==""))||
      ( isNaN(Latitude)||isNaN(Longitude) )
    )
  {
    ShowNotify($.i18n('Invalid Location Settings...'), 2000, true);
    return;
  }
  
  var secpanel=$("#sectable #SecPassword").val();
  if (secpanel != "") {
	if (!$.isNumeric(secpanel)) {
		ShowNotify($.i18n('Security Panel password can only contain numbers...'), 2000, true);
		return;
	}
  }
  
  //Check email settings
  var EmailServer=$("#emailtable #EmailServer").val();
  if (EmailServer!="")
  {
	var EmailPort=$("#emailtable #EmailPort").val();
	if (EmailPort=="") {
		ShowNotify($.i18n('Please enter an Email Port...'), 2000, true);
		return;
	}
	var EmailFrom=$("#emailtable #EmailFrom").val();
	var EmailTo=$("#emailtable #EmailTo").val();
	var EmailUsername=$("#emailtable #EmailUsername").val();
	var EmailPassword=$("#emailtable #EmailPassword").val();
	if ((EmailFrom=="")||(EmailTo=="")) {
		ShowNotify($.i18n('Invalid Email From/To Settings...'), 2000, true);
		return;
	}
	if ((EmailUsername!="")&&(EmailPassword=="")) {
		ShowNotify($.i18n('Please enter an Email Password...'), 2000, true);
		return;
	}
  }
  
	$.post("storesettings.webem", $("#settings").serialize(), function(data) {
		window.location = '/';
	});
}

function MakeScrollLink(nameclick,namescroll)
{
	$(nameclick).click(function(e){
		var position = $(namescroll).offset();
		scroll(0,position.top-60);
		e.preventDefault();
    });
}

$(document).ready(function() {
  MakeScrollLink("#idsystem","#system");
  MakeScrollLink("#idloghistory","#loghistory");
  MakeScrollLink("#idnotifications","#notifications");
  MakeScrollLink("#idemailsetup","#emailsetup");
  MakeScrollLink("#idmetercounters","#metercounters");
  MakeScrollLink("#idothersettings","#othersettings");

    $( "#dialog-findlatlong" ).dialog({
          autoOpen: false,
          width: 480,
          height: 280,
          modal: true,
          resizable: false,
          buttons: {
              "OK": function() {
                  var bValid = true;
                  bValid = bValid && checkLength( $("#dialog-findlatlong #latitude"), 3, 100 );
                  bValid = bValid && checkLength( $("#dialog-findlatlong #longitude"), 3, 100 );
                  if ( bValid ) {
					$("#locationtable #Latitude").val($( '#dialog-findlatlong #latitude' ).val());
					$("#locationtable #Longitude").val($( '#dialog-findlatlong #longitude' ).val());
					$( this ).dialog( "close" );
                  } else
                  {
					bootbox.alert($.i18n('Please enter a Latitude and Longitude!...'), 3500, true);
                  }
              },
              Cancel: function() {
                  $( this ).dialog( "close" );
              }
          },
          open: function() {
				$( '#getlatlong' ).click( function()
				{
						var address = $( '#dialog-findlatlong #address' ).val();
						if (address=="")
						{
							bootbox.alert($.i18n('Please enter a Address to search for!...'), 3500, true);
							return false;
						}
						geocoder = new google.maps.Geocoder();
						geocoder.geocode( { 'address': address}, function(results, status) {
							if (status == google.maps.GeocoderStatus.OK) {
									$( '#dialog-findlatlong #latitude' ).val(results[0].geometry.location.lat().toFixed(6));
									$( '#dialog-findlatlong #longitude' ).val(results[0].geometry.location.lng().toFixed(6));
							} else {
								bootbox.alert($.i18n('Geocode was not successful for the following reason') + ': ' +status);
							}
						});
						return false;
				} );              
          },
          close: function() {
            $( this ).dialog( "close" );
          }
    });
	$("#maindiv").i18n();
	ShowSettings();
} );   

</script>