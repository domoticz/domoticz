
Usage: Domoticz [-www <port>]  [-verbose <0|1>]
                -www <port>   Default is: -www 8080
                -verbose <0|1> (0 is none, 1 is debug)   Default is: -verbose 0
Examples:
                Domoticz            (this is the same as Domoticz -www 8080 -verbose 0)
				Domoticz -www 81 -verbose 1

If Domoticz and the browser are running on the same system you can connect with http://localhost:8080/
To stop the application: press Ctrl-C in the application screen (not in the browser)

Compatible browsers:
- Chrome/Firefox/Safari...
- Internet Explorer version 10+

Be aware that a Raspberry pi receives its time from an online ntp server.
If the pi is not connected to a network, the device time will not be updated, resulting in scheduling issues. 

All ports below 1024 on linux systems can only be started by root.
If you run domoticz on port 80, make sure to run it as root, e.g. : sudo ./domoticz

Compiling from source code:
------------------------------------------

Prerequisites: (or in other words, setup your compile enviroment): 

All:
- Compiled OpenZWave (http://code.google.com/p/open-zwave/)
sudo apt-get install libudev-dev
svn co http://open-zwave.googlecode.com/svn/trunk/ open-zwave-read-only
cd open-zwave-read-only/cpp/build/linux
make

Windows:
- VS2010 (headers can be modified to support a less version)
- boost libraries, you probably have to set the correct include/lib folder in the project properties as i did not bootstrap mine

------------------------------------------------------------------------------------------------
Ubuntu / Raspberry Pi (wheezy):
sudo apt-get install build-essential -y
sudo apt-get install cmake libboost-dev libboost-thread-dev libboost-system-dev libsqlite3-dev subversion curl libcurl4-openssl-dev libusb-dev libudev-dev

Raspberry Pi (wheezy, 22 November 2012): (First time compile time: 25 minutes)
At this moment (First generation RPi (128MB) (And possible the last generation too), there is a issue with the FTDI drivers (USB).
A quick fix it to add the following in front of /boot/cmdline.txt
dwc_otg.speed=1
This will cause the USB to switch back to version 1.1, but also the network speed is reduced a lot! (not that i want to use 80mbps)
When using the Arch Linux image, it looks like you do not have to apply the above fix.

------------------------------------------------------------------------------------------------
Raspberry Pi (Arch Linux):
sudo pacman -S gcc cmake subversion boost sqlite make curl libusb libudev-dev

------------------------------------------------------------------------------------------------
Debian (Mac OS)
Mac OS Installation:
Prerequistics:
- XCode with Command Line Tools
- macports

sudo port install cmake
sudo port install boost
sudo port install libusb
sudo port install libusb-compat
sudo port install libudev-dev

------------------------------------------------------------------------------------------------
Synology: (Initial setup time is 30 minutes)
- Make sure the device is bootstrapped, then:
ipkg update
ipkg upgrade
ipkg install gcc
ipkg install make
ipkg install optware-devel (dont worry about the wget-ssl error)
ipkg install boost-dev
ipkg install boost-thread
ipkg install boost-system
ipkg install boost-date-time
ipkg install libcurl-dev
ipkg install libusb
ipkg install libudev-dev

download/install cmake (take a coffee while doing the bootstrap and make commands)
wget http://www.cmake.org/files/v2.8/cmake-2.8.11.1.tar.gz
tar xvf cmake-2.8.11.1.tar.gz
cd cmake-2.8.11.1
./bootstrap
make
make install
cd ..
rm -R cmake-2.8.11.1
rm cmake-2.8.11.1.tar.gz

fix known pthread problem:

1) backup the pthread libraries found in /opt/arm-none-linux-gnueabi/lib/ :
mkdir /opt/arm-none-linux-gnueabi/lib_disabled
mv /opt/arm-none-linux-gnueabi/lib/libpthread* /opt/arm-none-linux-gnueabi/lib_disabled

2) Copy the pthread libraries found in /opt/lib
cp /lib/libpthread.so.0 /opt/arm-none-linux-gnueabi/lib/
cd /opt/arm-none-linux-gnueabi/lib/
ln -s libpthread.so.0 libpthread.so
ln -s libpthread.so.0 libpthread-2.5.so

3)
cp /opt/lib/libboost_* /lib

verify http://forum.synology.com/enu/viewtopic.php?p=185512#p185512
to check your /root/.profile

4)
install the FTDI and usb drivers. For a tutorial on a DS212+ see:
http://sirloon.net/installing-usb-serial-modules-on-nas-synology-ds212

basic installation:
insmod usbserial.kp
insmod ftdi_sio.ko

mknod /dev/usb/ttyUSB0 c 188 0

Plugin your RFXtrx transceiver, and verify the USB device is found with:
dmesg

you should see it found the device and assigned a usb device (in my case ttyUSB0, and it gets linked to /dev/usb/ttyUSB0)

goto the root folder again for the next steps
cd /root
------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------

Getting the source code:
svn checkout svn://svn.code.sf.net/p/domoticz/code/domoticz

cd domoticz

cmake CMakeLists.txt
make

now you should have the binary application, you can start it with
./domoticz

For additional parameters type:
./domoticz -h

Note: Compiling on the Raspberry Pi will take about 15 minutes

To Update to a newer version:
- stop the application (control-c), or stop the startup script (see below) with /etc/init.d/domoticz.sh stop

(from the domoticz folder)

svn update
cmake CMakeLists.txt
make

Unix startup script:
To start Domoticz automatically when the system starts perform the following steps:

sudo cp domoticz.sh /etc/init.d
sudo chmod +x /etc/init.d/domoticz.sh
sudo update-rc.d domoticz.sh defaults

Edit the startup script and point the DEAMON location to point to the installation folder:
sudo vi /etc/init.d/domoticz.sh

DAEMON=/home/pi/domoticz/domoticz

If you want to use another web interface port change:

OPTIONS="-www 8080"

You can now start domoticz with:
sudo /etc/init.d/domoticz.sh start

To stop:
sudo /etc/init.d/domoticz.sh stop

To check if domoticz is running:
sudo /etc/init.d/domoticz.sh status

If your system supports it you can also do
sudo service domoticz.sh start
sudo service domoticz.sh stop
sudo service domoticz.sh status

To update when you have installed it as startup service:
cd /home/pi/domoticz (or where you installed domoticz)
sudo service domoticz.sh stop
svn update
make
sudo service domoticz.sh start

Option: Create an update and backup script
chmod +x updatedomo

To update domoticz

login to your Raspberry Pi
cd domoticz
./updatedomo
